<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> -->

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="css/dashboard.css">

    <!-- Mapbox Scripts-->
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet" />

    <script defer src="/__/firebase/7.18.0/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/7.18.0/firebase-auth.js"></script>
    <script defer src="/__/firebase/7.18.0/firebase-database.js"></script>
    <script defer src="/__/firebase/7.18.0/firebase-messaging.js"></script>
    <script defer src="/__/firebase/7.18.0/firebase-storage.js"></script>
    <script defer src="/__/firebase/7.18.0/firebase-analytics.js"></script>
    <script defer src="/__/firebase/7.18.0/firebase-firestore.js"></script>
    <script defer src="js/firebaseCredentials.js"></script>
    <script defer src="js/admin-login.js"></script>

    <title>Shopperly | Admin Panel</title>

</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-dark bg-dark fixed-top flex-md-nowrap p-0 shadow">
        <!-- Navbar content -->
        <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">
            <img src="images/shopperLy.png" width="190" height="55" alt="" loading="lazy">
        </a>
        <ul class="navbar-nav px-3">
            <li class="nav-item text-nowrap">
                <span class="navbar-text">
                    <button class="btn btn-outline-danger my-2 my-sm-0" type="submit" id="btnLogout">Logout</button>
                </span>
            </li>
        </ul>
    </nav>

    <!-- Container -->
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2 bg-light d-none d-md-block sidebar">
                <div class="sidebar-left">

                </div>
            </div>
        </div>
    </div>


    <!-- main -->

    <main class="col-md-9 ml-sm-auto col-lg-10 px-4" id="dtable">
        <a id=deliveries-anchor></a>
        <h3>Current order navigation</h3>
        <h3>Map</h3>
        <!-- old map hidden -->
        <div id="menu" >
            <input id="streets-v11" type="radio" name="rtoggle" value="streets" checked="checked" />
            <label for="streets-v11">streets</label>
            <input id="light-v10" type="radio" name="rtoggle" value="light" />
            <label for="light-v10">light</label>
            <input id="dark-v10" type="radio" name="rtoggle" value="dark" />
            <label for="dark-v10">dark</label>
            <input id="outdoors-v11" type="radio" name="rtoggle" value="outdoors" />
            <label for="outdoors-v11">outdoors</label>
            <input id="satellite-v9" type="radio" name="rtoggle" value="satellite" />
            <label for="satellite-v9">satellite</label>
        </div>
        <div id="map" ></div>
        <!-- testing feature -->
        <!-- <iframe src="map.html" width="95%" height="800"></iframe> -->


        <hr>

        <table class="table table-sm table-light table-hover">
            <thead>
                <tr>

                    <th scope="col">Customer</th>
                    <th scope="col">Address</th>

                    <th scope="col">items</th>
                    <th scope="col">opeartions</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
        <script
            src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.0/mapbox-gl-directions.js"></script>
        <link rel="stylesheet"
            href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.0/mapbox-gl-directions.css"
            type="text/css" />

        <hr>

        <script>

            // TO MAKE THE MAP APPEAR YOU MUST
            // ADD YOUR ACCESS TOKEN FROM
            // https://account.mapbox.com
            mapboxgl.accessToken =
                'pk.eyJ1IjoicmFpaWRlbiIsImEiOiJja2Zta2phYW8xNXN6MnJ0NDk4bHU5Ym40In0.COvUfIzyMGpCfmsS34HP0g';
            var map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/streets-v11',
                center: [170.50317, -45.87415],
                //center: [-79.4512, 43.6568],
                zoom: 15

            });

            map.addControl(
                new MapboxDirections({
                    accessToken: mapboxgl.accessToken
                }),
                'top-left'
            );
            // Add geolocate control to the map.
            map.addControl(
                new mapboxgl.GeolocateControl({
                    positionOptions: {
                        enableHighAccuracy: true
                    },
                    trackUserLocation: true
                })
            );
            map.addControl(new mapboxgl.FullscreenControl());
        </script>


        <script defer src="js/datacontrol.js"></script>
        <script defer src="js/delievery.js"></script>

        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
            </script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
            integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
            </script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
            integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous">
            </script>

</html>

<script>
    // mapboxgl.accessToken = 'pk.eyJ1Ijoicm9rdW5hbWF0YXRhIiwiYSI6ImNrZm1iYWIxaDExeXQyeHF1anl6cXRpbnoifQ.kSHc4EEr1rNl3wmsGEl6TQ';
    // var map = new mapboxgl.Map({
    //     container: 'map',
    //     style: 'mapbox://styles/mapbox/streets-v11',
    //     zoom: 13,
    //     //center: [4.899, 52.372]
    //     center: [170.515888, -45.866373]

    // });
    var layerList = document.getElementById('menu');
    var inputs = layerList.getElementsByTagName('input');

    function switchLayer(layer) {
        var layerId = layer.target.id;
        map.setStyle('mapbox://styles/mapbox/' + layerId);
    }

    for (var i = 0; i < inputs.length; i++) {
        inputs[i].onclick = switchLayer;
    }

    map.on('load', function () {
        // Add an image to use as a custom marker
        map.loadImage(
            'https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png',
            function (error, image) {
                if (error) throw error;
                map.addImage('custom-marker', image);
                // Add a GeoJSON source with 2 points
                map.addSource('points', {
                    'type': 'geojson',
                    'data': {
                        'type': 'FeatureCollection',
                        'features': [
                            {
                                // feature for Mapbox DC
                                'type': 'Feature',
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [
                                        -77.03238901390978,
                                        38.913188059745586
                                    ]
                                },
                                'properties': {
                                    'title': 'Mapbox DC'
                                }
                            },
                            {
                                // feature for Mapbox SF
                                'type': 'Feature',
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-122.414, 37.776]
                                },
                                'properties': {
                                    'title': 'Mapbox SF'
                                }
                            }
                        ]
                    }
                });

                // Add a symbol layer
                map.addLayer({
                    'id': 'points',
                    'type': 'symbol',
                    'source': 'points',
                    'layout': {
                        'icon-image': 'custom-marker',
                        // get the title name from the source's "title" property
                        'text-field': ['get', 'title'],
                        'text-font': [
                            'Open Sans Semibold',
                            'Arial Unicode MS Bold'
                        ],
                        'text-offset': [0, 1.25],
                        'text-anchor': 'top'
                    }
                });
            }
        );
    });


</script>